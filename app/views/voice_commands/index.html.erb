<%= turbo_stream_from current_user %>

<div class="va-layout" data-controller="voice">
  <header class="va-nav">
    <span class="va-nav__brand">Voice Assistant</span>
    <nav class="va-nav__links">
      <%= link_to "Settings", edit_settings_path, class: "va-nav__link" %>
      <%= button_to "Sign out", session_path, method: :delete, class: "va-nav__link va-nav__link--muted" %>
    </nav>
  </header>

  <main class="va-main">
    <div class="va-orb-wrap">
      <div class="va-orb-ring"></div>
      <div class="va-orb-ring va-orb-ring--2"></div>
      <button class="va-orb" aria-label="Hold Space to speak">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 1a4 4 0 0 1 4 4v7a4 4 0 0 1-8 0V5a4 4 0 0 1 4-4zm-1.5 17.93A8.001 8.001 0 0 1 4 11H2a10 10 0 0 0 9 9.95V23h2v-2.05A10 10 0 0 0 22 11h-2a8 8 0 0 1-6.5 7.93z"/>
        </svg>
      </button>
    </div>

    <p class="va-status" data-voice-target="status">Ready</p>
    <p class="va-hint">Hold <kbd>Space</kbd> to speak</p>
  </main>
</div>

<div id="voice_alerts"></div>

<section class="va-pending">
  <h2>Timers</h2>
  <ul id="timers">
    <%= render @timers %>
    <li class="empty-state">No active timers</li>
  </ul>

  <h2>Looping Reminders</h2>
  <ul id="looping_reminders">
    <%= render @looping_reminders %>
    <li class="empty-state">No looping reminders</li>
  </ul>

  <h2>Reminders</h2>
  <ul id="reminders">
    <%= render @reminders %>
    <li class="empty-state">No reminders</li>
  </ul>

  <h3>Daily</h3>
  <ul id="daily_reminders">
    <%= render @daily_reminders %>
    <li class="empty-state">No daily reminders</li>
  </ul>
</section>

<section class="va-commands">
  <details>
    <summary>Commands</summary>
    <div class="va-commands__body">
      <div class="va-commands__group">
        <h3>General</h3>
        <ul>
          <li><q>what time is it</q></li>
          <li><q>when is sunset</q></li>
          <li><q>set a timer for 5 minutes</q></li>
        </ul>
      </div>
      <div class="va-commands__group">
        <h3>Reminders</h3>
        <ul>
          <li><q>set a reminder in 20 minutes to take the food out of the oven</q></li>
          <li><q>set a 9pm reminder to take medication</q></li>
          <li><q>set a reminder at 9pm to take medication</q></li>
          <li><q>set a 9:30pm reminder to take medication</q></li>
          <li><q>set a daily 7am reminder to write morning pages</q></li>
          <li><q>set a daily reminder at 7am to write morning pages</q></li>
        </ul>
      </div>
      <div class="va-commands__group">
        <h3>Looping reminders</h3>
        <ul>
          <li><q>looping reminder every 5 minutes saying did you take your meds until I say yes I did</q></li>
          <li><q>run loop 1</q> — restart a stopped loop</li>
          <li><q>alias 'run loop 1' as 'meds'</q> or <q>alias 'run loop 1' to 'meds'</q> — create a shortcut phrase</li>
          <li>say your stop phrase — stops the loop</li>
        </ul>
      </div>
    </div>
  </details>
</section>
